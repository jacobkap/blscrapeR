<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An API Wrapper for the Bureau of Labor Statistics (BLS) • blscrapeR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="An API Wrapper for the Bureau of Labor Statistics (BLS)">
<meta property="og:description" content="Scrapes various data from &lt;https://www.bls.gov/&gt;. The U.S. Bureau of Labor Statistics is the statistical branch of the United States Department of Labor. The package has additional functions to help parse, analyze and visualize the data.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">blscrapeR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.1.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Employment_and_Unemployment.html">BLS API Employment and Unemployment</a>
    </li>
    <li>
      <a href="articles/Inflation_and_Prices.html">BLS API Inflation and Prices</a>
    </li>
    <li>
      <a href="articles/Mapping_BLS_Data.html">Mapping BLS Data</a>
    </li>
    <li>
      <a href="articles/Pay_and_Benefits.html">BLS API Pay and Benefits</a>
    </li>
    <li>
      <a href="articles/QCEW_API.html">Quarterly Census of Employment and Wages API</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/keberwein/blscrapeR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
<div id="blscraper-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#blscraper-" class="anchor"></a>blscrapeR <img src="reference/figures/blscrapeR_hex.png" align="right">
</h1></div>

<p>Designed to be a tidy API wrapper for the Bureau of Labor Statistics (BLS.) The package has additional functions to help parse, analyze and visualize the data. The package utalizes “tidyverse” concepts for internal functionality and encourages the use of those concepts with the output data.</p>
<div id="install" class="section level2">
<h2 class="hasAnchor">
<a href="#install" class="anchor"></a>Install</h2>
<ul>
<li>Stable version from CRAN:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"blscrapeR"</span>)</a></code></pre></div>
<ul>
<li>The latest development version from GitHub:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"keberwein/blscrapeR"</span>)</a></code></pre></div>
<p>Before getting started, you’ll probably want to head over to the BLS and <a href="http://data.bls.gov/registrationEngine/">get set up</a> with an API key. While an API key is not required to use the package, the query limits are much higher if you have a key and you’ll have access to more data. Plus, it’s free (as in beer), so why not?</p>
</div>
<div id="basic-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-usage" class="anchor"></a>Basic Usage</h2>
<p>For “quick and dirty” type of analysis, the package has some quick functions that will pull metrics from the API without series numbers. These quick functions include unemployment, employment, and civilian labor force on a national level.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(blscrapeR)</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co"># Grab the Unemployment Rate (U-3) </span></a>
<a class="sourceLine" id="cb3-3" title="3">df &lt;-<span class="st"> </span><span class="kw"><a href="reference/quick_unemp_rate.html">quick_unemp_rate</a></span>()</a>
<a class="sourceLine" id="cb3-4" title="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(df, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">#&gt; # A tibble: 5 x 6</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt;    year    period periodName value footnotes  seriesID</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt;   &lt;dbl&gt;    &lt;list&gt;     &lt;list&gt; &lt;dbl&gt;    &lt;list&gt;    &lt;list&gt;</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">#&gt; 1  2017 &lt;chr [1]&gt;  &lt;chr [1]&gt;   4.1 &lt;chr [1]&gt; &lt;chr [1]&gt;</span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">#&gt; 2  2017 &lt;chr [1]&gt;  &lt;chr [1]&gt;   4.2 &lt;chr [1]&gt; &lt;chr [1]&gt;</span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#&gt; 3  2017 &lt;chr [1]&gt;  &lt;chr [1]&gt;   4.4 &lt;chr [1]&gt; &lt;chr [1]&gt;</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt; 4  2017 &lt;chr [1]&gt;  &lt;chr [1]&gt;   4.3 &lt;chr [1]&gt; &lt;chr [1]&gt;</span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">#&gt; 5  2017 &lt;chr [1]&gt;  &lt;chr [1]&gt;   4.4 &lt;chr [1]&gt; &lt;chr [1]&gt;</span></a></code></pre></div>
</div>
<div id="search-bls-ids" class="section level2">
<h2 class="hasAnchor">
<a href="#search-bls-ids" class="anchor"></a>Search BLS IDs</h2>
<p>Some knowledge of BLS ids are needed to query the API. The package includes a “fuzzy search” function to help find these ids. There are currenlty more than 75,000 series ids in the package’s internal dataset, <code>series_ids</code>. While these aren’t all the series ids the BLS offers, it contains the most popular. The <a href="https://beta.bls.gov/dataQuery/search">BLS Data Finder</a> is another good resource for finding series ids, that may not be in the internal dataset.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(blscrapeR)</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co"># Find series ids relating to the total labor force in LA.</span></a>
<a class="sourceLine" id="cb4-3" title="3">ids &lt;-<span class="st"> </span><span class="kw"><a href="reference/search_ids.html">search_ids</a></span>(<span class="dt">keyword =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Labor Force"</span>, <span class="st">"Los Angeles"</span>))</a>
<a class="sourceLine" id="cb4-4" title="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(ids)</a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt; # A tibble: 6 x 4</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">#&gt;                                                                  series_title</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">#&gt;                                                                         &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">#&gt; 1 Labor Force: Balance Of California, State Less Los Angeles-Long Beach-Glend</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">#&gt; 2  Labor Force: Los Angeles-Long Beach-Glendale, Ca Metropolitan Division (S)</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">#&gt; 3 Labor Force: Balance Of California, State Less Los Angeles-Long Beach-Glend</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">#&gt; 4       Labor Force: Los Angeles-Long Beach, Ca Combined Statistical Area (U)</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">#&gt; 5                                     Labor Force: Los Angeles County, Ca (U)</span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="co">#&gt; 6                                       Labor Force: Los Angeles City, Ca (U)</span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">#&gt; # ... with 3 more variables: series_id &lt;chr&gt;, seasonal &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="co">#&gt; #   periodicity_code &lt;chr&gt;</span></a></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(blscrapeR)</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co"># Find series ids relating to median weekly earnings of women software developers.</span></a>
<a class="sourceLine" id="cb5-3" title="3">ids &lt;-<span class="st"> </span><span class="kw"><a href="reference/search_ids.html">search_ids</a></span>(<span class="dt">keyword =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Earnings"</span>, <span class="st">"Software"</span>, <span class="st">"Women"</span>))</a>
<a class="sourceLine" id="cb5-4" title="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(ids)</a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co">#&gt; # A tibble: 1 x 4</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">#&gt;                                                                  series_title</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co">#&gt;                                                                         &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">#&gt; 1 (Unadj)- Median Usual Weekly Earnings (Second Quartile), Employed Full Time</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">#&gt; # ... with 3 more variables: series_id &lt;chr&gt;, seasonal &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">#&gt; #   periodicity_code &lt;chr&gt;</span></a></code></pre></div>
</div>
<div id="api-keys" class="section level2">
<h2 class="hasAnchor">
<a href="#api-keys" class="anchor"></a>API Keys</h2>
<p>You should consider <a href="http://data.bls.gov/registrationEngine/">getting an API key</a> form the BLS. The package has a function to install your key in your <code>.Renviron</code> so you’ll only have to worry about it once. Plus, it will add extra security by not having your key hard-coded in your scripts for all the world to see.</p>
<div id="from-the-bls" class="section level3">
<h3 class="hasAnchor">
<a href="#from-the-bls" class="anchor"></a>From the BLS:</h3>
<table class="table">
<thead><tr class="header">
<th>Service</th>
<th>Version 2.0 (Registered)</th>
<th>Version 1.0 (Unregistered)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Daily query limit</td>
<td>500</td>
<td>25</td>
</tr>
<tr class="even">
<td>Series per query limit</td>
<td>50</td>
<td>25</td>
</tr>
<tr class="odd">
<td>Years per query limit</td>
<td>20</td>
<td>10</td>
</tr>
<tr class="even">
<td>Net/Percent Changes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Optional annual averages</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="even">
<td>Series descriptions</td>
<td>Yes</td>
<td>No</td>
</tr>
</tbody>
</table>
</div>
<div id="key-install" class="section level3">
<h3 class="hasAnchor">
<a href="#key-install" class="anchor"></a>Key Install</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(blscrapeR)</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw"><a href="reference/set_bls_key.html">set_bls_key</a></span>(<span class="st">"YOUR_KEY_IN_QUOTATIONS"</span>)</a>
<a class="sourceLine" id="cb6-3" title="3"><span class="co"># First time, reload your enviornment so you can use the key without restarting R.</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/readRenviron">readRenviron</a></span>(<span class="st">"~/.Renviron"</span>)</a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co"># You can check it with:</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.getenv">Sys.getenv</a></span>(<span class="st">"BLS_KEY"</span>)</a></code></pre></div>
<p>Note: The above script will add a line to your <code>.Renviron</code> file to be re-used when ever you are in the package. If you are not comfortable with that, you can add the following line to your <code>.Renviron</code> file manually to produce the same result.</p>
<p><code>BLS_KEY='YOUR_KEY_IN_SINGLE_QUOTES'</code></p>
</div>
</div>
<div id="advanced-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#advanced-usage" class="anchor"></a>Advanced Usage</h2>
<p>Now that you have an API key installed, you can call your key in the package’s function arguments with <code>"BLS_KEY"</code>. Don’t forget the quotes! If you just HAVE to have your key hard-coded in your scripts, you can also pass they key as a string.</p>
<div id="download-multiple-bls-series-at-once" class="section level3">
<h3 class="hasAnchor">
<a href="#download-multiple-bls-series-at-once" class="anchor"></a>Download Multiple BLS Series at Once</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(blscrapeR)</a>
<a class="sourceLine" id="cb7-2" title="2"></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="co"># Grab several data sets from the BLS at onece.</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co"># </span><span class="al">NOTE</span><span class="co"> on series IDs: </span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co"># EMPLOYMENT LEVEL - Civilian labor force - LNS12000000</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co"># UNEMPLOYMENT LEVEL - Civilian labor force - LNS13000000</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="co"># UNEMPLOYMENT RATE - Civilian labor force - LNS14000000</span></a>
<a class="sourceLine" id="cb7-8" title="8">df &lt;-<span class="st"> </span><span class="kw"><a href="reference/bls_api.html">bls_api</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"LNS12000000"</span>, <span class="st">"LNS13000000"</span>, <span class="st">"LNS14000000"</span>),</a>
<a class="sourceLine" id="cb7-9" title="9">              <span class="dt">startyear =</span> <span class="dv">2008</span>, <span class="dt">endyear =</span> <span class="dv">2017</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.getenv">Sys.getenv</a></span>(<span class="st">"BLS_KEY"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="st">    </span><span class="co"># Add time-series dates</span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="st">    </span><span class="kw"><a href="reference/dateCast.html">dateCast</a></span>()</a></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="co"># Plot employment level</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb8-3" title="3">gg1200 &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/subset">subset</a></span>(df, seriesID<span class="op">==</span><span class="st">"LNS12000000"</span>)</a>
<a class="sourceLine" id="cb8-4" title="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb8-5" title="5"><span class="kw">ggplot</span>(gg1200, <span class="kw">aes</span>(<span class="dt">x=</span>date, <span class="dt">y=</span>value)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="st">    </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"Employment Level - Civ. Labor Force"</span>)</a></code></pre></div>
<p><img src="https://github.com/keberwein/keberwein.github.io/blob/master/images/bls_img/emplevelggreadme.png?raw=true"></p>
</div>
<div id="median-weekly-earnings" class="section level3">
<h3 class="hasAnchor">
<a href="#median-weekly-earnings" class="anchor"></a>Median Weekly Earnings</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(blscrapeR)</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidyverse)</a>
<a class="sourceLine" id="cb9-3" title="3"><span class="co"># Median Usual Weekly Earnings by Occupation, Unadjusted Second Quartile.</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="co"># In current dollars</span></a>
<a class="sourceLine" id="cb9-5" title="5">df &lt;-<span class="st"> </span><span class="kw"><a href="reference/bls_api.html">bls_api</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"LEU0254530800"</span>, <span class="st">"LEU0254530600"</span>), <span class="dt">startyear =</span> <span class="dv">2000</span>, <span class="dt">endyear =</span> <span class="dv">2016</span>, <span class="dt">registrationKey =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.getenv">Sys.getenv</a></span>(<span class="st">"BLS_KEY"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="st">    </span><span class="kw">spread</span>(seriesID, value) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="reference/dateCast.html">dateCast</a></span>()</a></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co"># A little help from ggplot2!</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb10-3" title="3"><span class="kw">ggplot</span>(<span class="dt">data =</span> df, <span class="kw">aes</span>(<span class="dt">x =</span> date)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="st">    </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> LEU0254530800, <span class="dt">color =</span> <span class="st">"Database Admins."</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="st">    </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> LEU0254530600, <span class="dt">color =</span> <span class="st">"Software Devs."</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"Median Weekly Earnings by Occupation"</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">"value"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">"top"</span>, <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">0.5</span>)) </a></code></pre></div>
<p><img src="https://github.com/keberwein/keberwein.github.io/blob/master/images/bls_img/blscrape_docfig1.png?raw=true"></p>
<p><em>For more advanced usage, please see the <a href="https://github.com/keberwein/blscrapeR/tree/master/vignettes">package vignettes</a>.</em></p>
</div>
</div>
<div id="basic-mapping" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-mapping" class="anchor"></a>Basic Mapping</h2>
<p>Like the the “quick functions” for requesting API data, there are two “quick” map functions, <code><a href="reference/bls_map_county.html">bls_map_county()</a></code> and <code><a href="reference/bls_map_state.html">bls_map_state()</a></code>. These functions are designed to work with two helper functions <code><a href="reference/get_bls_county.html">get_bls_county()</a></code> and get <code><a href="reference/get_bls_state.html">get_bls_state()</a></code>. Each helper function downloads recent data for unemployment rate, unemployment level, employment rate, employment level and civilian labor force. These functions do not pull data from the API, rather they pull data from text files and <em>do not</em> count against daily query limits.</p>
<p><strong>Note:</strong> Even though the <code>get_bls</code> functions return data in the correct formats, the <code>bls_map</code> functions can be used with any data set that includes FIPS codes.</p>
<p>The example below maps the current unemployment rate by county. Alaska and Hawaii have to re-located to save space.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(blscrapeR)</a>
<a class="sourceLine" id="cb11-2" title="2"><span class="co"># Grap the data in a pre-formatted data frame.</span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="co"># If no argument is passed to the function it will load the most recent month's data.</span></a>
<a class="sourceLine" id="cb11-4" title="4">df &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_bls_county.html">get_bls_county</a></span>()</a>
<a class="sourceLine" id="cb11-5" title="5"></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="co">#Use map function with arguments.</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="kw"><a href="reference/map_bls.html">map_bls</a></span>(<span class="dt">map_data =</span> df, <span class="dt">fill_rate =</span> <span class="st">"unemployed_rate"</span>, </a>
<a class="sourceLine" id="cb11-8" title="8">               <span class="dt">labtitle =</span> <span class="st">"Unemployment Rate by County"</span>)</a></code></pre></div>
<p><img src="https://github.com/keberwein/keberwein.github.io/blob/master/images/bls_img/blscrape_docfig3.png?raw=true"></p>
</div>
<div id="advanced-mapping" class="section level2">
<h2 class="hasAnchor">
<a href="#advanced-mapping" class="anchor"></a>Advanced Mapping</h2>
<p>What’s R mapping without some interactivity? Below we’re using two additional packages, <code>leaflet</code>, which is popular for creating interactive maps and <code>tigris</code>, which allows us to download the exact shape files we need for these data and includes a few other nice tools.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="co"># Leaflet map</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(blscrapeR)</a>
<a class="sourceLine" id="cb12-3" title="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tigris)</a>
<a class="sourceLine" id="cb12-4" title="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(leaflet)</a>
<a class="sourceLine" id="cb12-5" title="5">map.shape &lt;-<span class="st"> </span><span class="kw">counties</span>(<span class="dt">cb =</span> <span class="ot">TRUE</span>, <span class="dt">year =</span> <span class="dv">2015</span>)</a>
<a class="sourceLine" id="cb12-6" title="6">df &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_bls_county.html">get_bls_county</a></span>()</a>
<a class="sourceLine" id="cb12-7" title="7"></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="co"># Slice the df down to only the variables we need and rename "fips" colunm</span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co"># so I can get a cleaner merge later.</span></a>
<a class="sourceLine" id="cb12-10" title="10">df &lt;-<span class="st"> </span>df[, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"unemployed_rate"</span>, <span class="st">"fips"</span>)]</a>
<a class="sourceLine" id="cb12-11" title="11"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colnames">colnames</a></span>(df) &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"unemployed_rate"</span>, <span class="st">"GEOID"</span>)</a>
<a class="sourceLine" id="cb12-12" title="12"></a>
<a class="sourceLine" id="cb12-13" title="13"><span class="co"># Merge df with spatial object.</span></a>
<a class="sourceLine" id="cb12-14" title="14">leafmap &lt;-<span class="st"> </span><span class="kw">geo_join</span>(map.shape, df, <span class="dt">by=</span><span class="st">"GEOID"</span>)</a>
<a class="sourceLine" id="cb12-15" title="15"></a>
<a class="sourceLine" id="cb12-16" title="16"><span class="co"># Format popup data for leaflet map.</span></a>
<a class="sourceLine" id="cb12-17" title="17">popup_dat &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(<span class="st">"&lt;strong&gt;County: &lt;/strong&gt;"</span>, </a>
<a class="sourceLine" id="cb12-18" title="18">                    leafmap<span class="op">$</span>NAME, </a>
<a class="sourceLine" id="cb12-19" title="19">                    <span class="st">"&lt;br&gt;&lt;strong&gt;Value: &lt;/strong&gt;"</span>, </a>
<a class="sourceLine" id="cb12-20" title="20">                    leafmap<span class="op">$</span>unemployed_rate)</a>
<a class="sourceLine" id="cb12-21" title="21"></a>
<a class="sourceLine" id="cb12-22" title="22">pal &lt;-<span class="st"> </span><span class="kw">colorQuantile</span>(<span class="st">"YlOrRd"</span>, <span class="ot">NULL</span>, <span class="dt">n =</span> <span class="dv">20</span>)</a>
<a class="sourceLine" id="cb12-23" title="23"><span class="co"># Render final map in leaflet.</span></a>
<a class="sourceLine" id="cb12-24" title="24"><span class="kw">leaflet</span>(<span class="dt">data =</span> leafmap) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">addTiles</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-25" title="25"><span class="st">    </span><span class="kw">addPolygons</span>(<span class="dt">fillColor =</span> <span class="op">~</span><span class="kw">pal</span>(unemployed_rate), </a>
<a class="sourceLine" id="cb12-26" title="26">                <span class="dt">fillOpacity =</span> <span class="fl">0.8</span>, </a>
<a class="sourceLine" id="cb12-27" title="27">                <span class="dt">color =</span> <span class="st">"#BDBDC3"</span>, </a>
<a class="sourceLine" id="cb12-28" title="28">                <span class="dt">weight =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb12-29" title="29">                <span class="dt">popup =</span> popup_dat)</a></code></pre></div>
<p><strong>Note:</strong> This is just a static image since the full map would not be as portable for the purpose of documentation.</p>
<p><img src="https://github.com/keberwein/keberwein.github.io/blob/master/images/bls_img/blscrape_docfig3-1.png?raw=true"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=blscrapeR">https://​cloud.r-project.org/​package=blscrapeR</a>
</li>
<li>Browse source code at <br><a href="https://github.com/keberwein/blscrapeR">https://​github.com/​keberwein/​blscrapeR</a>
</li>
<li>Report a bug at <br><a href="https://github.com/keberwein/blscrapeR/issues">https://​github.com/​keberwein/​blscrapeR/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Kris Eberwein <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/keberwein/blscrapeR"><img src="https://travis-ci.org/keberwein/blscrapeR.png?branch=master" alt="Build Status"></a></li>
<li><a href="http://www.r-pkg.org/badges/version/blscrapeR"><img src="https://www.r-pkg.org/badges/version/blscrapeR" alt="CRAN_Status_Badge"></a></li>
<li><a href="http://www.repostatus.org/#active"><img src="http://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active - The project has reached a stable, usable state and is being actively developed."></a></li>
</ul>
</div>
</div>
</div>

      <footer><div class="copyright">
  <p>Developed by Kris Eberwein.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
